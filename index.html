<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mafia Bingo</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

  body {
    margin: 0;
    background: #f3fdf8;
    color: #1a2d23;
    font-family: 'Montserrat', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    padding: 1rem;
  }

  h1 {
    margin-top: 0;
    font-weight: 700;
    font-size: 2.5rem;
    color: #3aa86f;
    text-shadow: 0 0 6px #b5eac8;
  }

  p.subtitle {
    font-size: 1.1rem;
    margin: 0 0 1.5rem 0;
    color: #4f6f5f;
  }

  form {
    background: #e6f7f0;
    padding: 1.2rem 1.5rem;
    border-radius: 10px;
    box-shadow: 0 0 12px #c7e8d6;
    max-width: 360px;
    width: 100%;
    margin-bottom: 2rem;
  }

  label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    color: #3aa86f;
  }

  input[type="text"] {
    width: 100%;
    padding: 0.6rem 0.8rem;
    border-radius: 6px;
    border: 1px solid #c1e8d4;
    font-size: 1rem;
    box-sizing: border-box;
  }

  button {
    margin-top: 1rem;
    width: 100%;
    background: #5fbf87;
    border: none;
    padding: 0.8rem 0;
    font-size: 1.1rem;
    font-weight: 700;
    color: #fff;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #3aa86f;
  }

  #board {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    max-width: 500px;
    width: 100%;
  }

  .square {
    background: #d9f4e7;
    border-radius: 8px;
    padding: 10px;
    text-align: center;
    cursor: pointer;
    color: #1a2d23;
    font-weight: 600;
    font-size: 0.85rem;
    box-shadow: inset 0 0 5px #9ed7b6;
    transition: background 0.3s ease, color 0.3s ease;
    line-height: 1.2;
    user-select: none;
  }

  .square.checked {
    background: #3aa86f;
    color: #fff;
    text-decoration: line-through;
    box-shadow: 0 0 10px #b5eac8;
  }

  footer {
    margin-top: auto;
    font-size: 0.85rem;
    color: #7d9c8f;
  }

  @media (max-width: 550px) {
    #board {
      max-width: 100%;
      gap: 6px;
    }
    .square {
      font-size: 0.75rem;
      padding: 8px;
    }
  }
</style>
</head>
<body>

<h1>Mafia Bingo</h1>
<p class="subtitle">Submit your Discord username to get your unique bingo board!</p>

<form id="usernameForm">
  <label for="username">Discord Username</label>
  <input type="text" id="username" placeholder="e.g. Player#1234" required />
  <button type="submit">Get Bingo Board</button>
</form>

<div id="board"></div>

<footer>© Mafia Bingo 2025</footer>

<script>
  const achievements = [
    // (same list, unchanged)
    "Find 3 BGT as the detective",
    "Get a BGT on a framed player as the detective",
    "Receive the attention span is too high message as the distractor",
    "As the distractor, successfully action on a moving neutral",
    "Heal three players as the doctor",
    "As the doctor, save a neutral n1",
    "As the duskweaver, gather everyone for a night when talking dead was supposed to happen",
    "Skip night and help a mafia member get voted out as the duskweaver",
    "Roll the white dice and save a player as the gambler",
    "Successfully revive a villager with your red dice as the gambler",
    "Take out a neutral as the guardian",
    "As the guardian, take out 2 players",
    "As the judge, prosecute 2 mafia members",
    "Prosecute a jester as the judge",
    "As the lawyer, acquit a villager from being hung",
    "Expose a mafia by acquitting as the lawyer",
    "Survive the whole game as the link",
    "As the link, link a mafia and neutral together",
    "As the manager, give a thieved player an extra usage",
    "Manage 3 villagers as the manager",
    "As the mayor, do not reveal the entire game and survive",
    "As the mayor, reveal throughout the game and survive until the end",
    "Check the body of a neutral death as the mortician",
    "As the mortician, find 2 mafia players on ONE body",
    "As the oracle, use your sense ability to see that there is 0 players with a role in the game",
    "Successfully hide two players and prevent their death as the oracle",
    "Get three same sides in a row as the pi",
    "As the pi, compare a mafia player with another mafia player",
    "As the spy, find the godfather night one",
    "See the baker handing out bread as the spy",
    "As the vigilante, accidentally shoot a villager due to the magician",
    "Claim the submissor as the vigilante",
    "As the watcher, see a player get 2+ visits",
    "Watch someone visit yourself as the watcher",
    "As the blackmailer, successfully action on 4 different players",
    "Blackmail a neutral player",
    "As the framer, get a villager hung the same night you framed them",
    "Frame the mafia alc before they get into the group chat",
    "Kill an information role night one as the godfather",
    "As the godfather, kill shaman’s doll without attacking the shaman",
    "As the goose, action on the vigilante and make them shoot an innocent",
    "Goose a protection role from saving a player",
    "Receive the “role group not found” message as the hacker",
    "As the hacker, find the baiter before any of your teammates die to them",
    "As the harbinger, assassinate a protection role",
    "Assassinate a neutral role as the harbinger",
    "As the manipulator, use your action to save your teammate from being hung",
    "Manipulate and get a village hung in the process",
    "As the mimic, action on two players and successfully stop their action",
    "Mimic a mafia member the night they are linked",
    "Successfully raise the hoarder on a player as the necromancer",
    "Raise the vigilante and shoot a villager as the necromancer",
    "As the politician, reveal a horsemen",
    "Reveal the link or pi as the politician",
    "Successfully ritual two players",
    "As the ritualist, use your ability to claim the submissor",
    "Silence a neutral role",
    "As the silencer, silence three village roles",
    "As the alchemist find a mafia member n1",
    "When trying to lethal, receive the “player was nowhere to be found” message as the alchemist"
  ];

  function hashStringToNumber(str) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = (hash << 5) - hash + str.charCodeAt(i);
      hash |= 0;
    }
    return Math.abs(hash);
  }

  function shuffleArray(arr, seed) {
    let result = arr.slice();
    let random = mulberry32(seed);
    for (let i = result.length - 1; i > 0; i--) {
      let j = Math.floor(random() * (i + 1));
      [result[i], result[j]] = [result[j], result[i]];
    }
    return result;
  }

  function mulberry32(a) {
    return function() {
      var t = a += 0x6D2B79F5;
      t = Math.imul(t ^ (t >>> 15), t | 1);
      t ^= t + Math.imul(t ^ (t >>> 7), t | 61);
      return ((t ^ (t >>> 14)) >>> 0) / 4294967296;
    }
  }

  const form = document.getElementById('usernameForm');
  const boardDiv = document.getElementById('board');

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const username = form.username.value.trim();
    if (!username) {
      alert("Please enter your Discord username.");
      return;
    }
    generateBoard(username);
  });

  function generateBoard(username) {
    boardDiv.innerHTML = '';
    const seed = hashStringToNumber(username);
    const shuffled = shuffleArray(achievements, seed);
    const bingoSquares = shuffled.slice(0, 25);

    bingoSquares.forEach((ach, index) => {
      const sq = document.createElement('div');
      sq.className = 'square';
      sq.textContent = ach;
      sq.dataset.index = index;
      sq.addEventListener('click', () => {
        sq.classList.toggle('checked');
        saveCheckedSquares(username);
      });
      boardDiv.appendChild(sq);
    });

    loadCheckedSquares(username);
  }

  function saveCheckedSquares(username) {
    const checked = [];
    document.querySelectorAll('.square.checked').forEach(sq => {
      checked.push(sq.dataset.index);
    });
    localStorage.setItem(`mafiaBingoChecked_${username}`, JSON.stringify(checked));
  }

  function loadCheckedSquares(username) {
    const saved = localStorage.getItem(`mafiaBingoChecked_${username}`);
    if (saved) {
      const checked = JSON.parse(saved);
      document.querySelectorAll('.square').forEach(sq => {
        if (checked.includes(sq.dataset.index)) {
          sq.classList.add('checked');
        }
      });
    }
  }
</script>

</body>
</html>
